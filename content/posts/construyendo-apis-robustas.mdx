---
title: 'Construyendo APIs Robustas con Node.js y TypeScript'
date: '2024-02-10'
description: 'Una guía completa sobre cómo crear APIs escalables y mantenibles utilizando las mejores prácticas de TypeScript.'
image: '/blog/api-typescript.png'
category: 'Backend'
readTime: '5 min'
---

# Construyendo APIs Robustas con Node.js y TypeScript

<Info>
  Este artículo te guiará a través del proceso de construcción de una API REST robusta
  utilizando Node.js y TypeScript. Aprenderás las mejores prácticas y patrones de diseño
  para crear APIs escalables y mantenibles.
</Info>

## Configuración del Proyecto

Primero, necesitamos configurar nuestro proyecto con las dependencias necesarias:

```bash
mkdir api-typescript
cd api-typescript
npm init -y
npm install express typescript @types/express @types/node ts-node-dev
```

<Tip>
  Usar `ts-node-dev` en lugar de `nodemon` nos permite ejecutar TypeScript directamente
  sin necesidad de compilar a JavaScript en desarrollo.
</Tip>

## Estructura del Proyecto

Una buena estructura de proyecto es fundamental para la mantenibilidad:

```typescript
// src/types/index.ts
export interface User {
  id: string;
  name: string;
  email: string;
  role: 'admin' | 'user';
}

export interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
}
```

<Warning>
  Es importante definir tipos estrictos para tus modelos y respuestas. Esto ayuda a
  prevenir errores en tiempo de compilación y mejora la documentación del código.
</Warning>

## Implementación del Servidor

Aquí está un ejemplo de cómo implementar un servidor Express con TypeScript:

```typescript
// src/server.ts
import express, { Request, Response } from 'express';
import { User, ApiResponse } from './types';

const app = express();
app.use(express.json());

app.get('/api/users', async (req: Request, res: Response) => {
  try {
    const users: User[] = [
      {
        id: '1',
        name: 'John Doe',
        email: 'john@example.com',
        role: 'user'
      }
    ];

    const response: ApiResponse<User[]> = {
      success: true,
      data: users
    };

    res.json(response);
  } catch (error) {
    const response: ApiResponse<null> = {
      success: false,
      error: 'Error al obtener usuarios'
    };

    res.status(500).json(response);
  }
});
```

<Demo title="Ejemplo de Respuesta">
```json
{
  "success": true,
  "data": [
    {
      "id": "1",
      "name": "John Doe",
      "email": "john@example.com",
      "role": "user"
    }
  ]
}
```
</Demo>

## Mejores Prácticas

### 1. Validación de Datos

Siempre valida los datos de entrada utilizando bibliotecas como `zod` o `joi`:

```typescript
import { z } from 'zod';

const UserSchema = z.object({
  name: z.string().min(2),
  email: z.string().email(),
  role: z.enum(['admin', 'user'])
});
```

### 2. Manejo de Errores

Implementa un manejador de errores centralizado:

```typescript
// src/middleware/errorHandler.ts
import { Request, Response, NextFunction } from 'express';

export function errorHandler(
  error: Error,
  req: Request,
  res: Response,
  next: NextFunction
) {
  console.error(error);
  
  res.status(500).json({
    success: false,
    error: 'Error interno del servidor'
  });
}
```

<ImageGrid
  images={[
    {
      src: "/blog/error-handling.png",
      alt: "Diagrama de manejo de errores",
      caption: "Flujo de manejo de errores en una API REST"
    },
    {
      src: "/blog/validation.png",
      alt: "Validación de datos",
      caption: "Proceso de validación de datos de entrada"
    }
  ]}
/>

## Conclusión

Construir APIs robustas con TypeScript requiere una buena planificación y seguir las mejores prácticas. Algunos puntos clave a recordar:

- Usar tipos estrictos para todo
- Implementar validación de datos
- Manejar errores de forma centralizada
- Mantener una estructura de proyecto clara
- Documentar el código y las APIs

<Info>
  Este es solo el comienzo. En futuros artículos exploraremos temas más avanzados como
  autenticación, caché, pruebas unitarias y documentación automática con Swagger.
</Info>
